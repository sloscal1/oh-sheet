<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MTG Inventory</title>
    <link rel="stylesheet" href="./styles/styles.css" />
    <link href="./styles/tabulator_simple.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.5.0/dist/js/tabulator.min.js"></script>
  </head>
  <body onload="load_data()">
    <nav class="w3-bar w3-black">
      <button class="w3-bar-item w3-button active" onclick="showTab('new_cards')">New Cards</button>
      <button class="w3-bar-item w3-button" onclick="showTab('inventory_management')">Manage Inventory</button>
    </nav>

    <div id="new_cards" class="tab_section">
      <!-- Top Toolbar -->
      <div class="toolbar-wrapper" id="toolbar-wrapper">
        <div class="toolbar">
          <div class="toolbar-group">
            <label for="myfile">Import:</label>
            <input type="file" id="myfile" name="myfile">
          </div>

          <div class="toolbar-group">
            <label for="location">Location:</label>
            <input id="location" placeholder="Enter location">
          </div>

          <div class="toolbar-group">
            <label for="condition">Condition:</label>
            <select name="Condition" id="condition">
              <option value="near mint">Near Mint</option>
              <option value="lightly played">Lightly Played</option>
              <option value="played">Played</option>
              <option value="heavily played">Heavily Played</option>
              <option value="damaged">Damaged</option>
            </select>
          </div>

          <button id="save" type="button" onclick="saveInventory()">Save Inventory</button>

          <!-- Mobile inventory toggle -->
          <button id="inventory-toggle" class="inventory-toggle" onclick="toggleInventoryPanel()">
            Inventory <span id="inventory-count" class="inventory-badge">0</span>
          </button>
        </div>
        <div class="toolbar-handle" title="Hover to show controls"></div>
      </div>

      <!-- Main Content Area -->
      <div class="main-content">
        <!-- Left Panel: Card Search -->
        <div class="panel panel-left">
          <div class="panel-header">
            <h2>Card Search</h2>
          </div>
          <div id="autocompletes"></div>
          <div id="filters"></div>
          <div id="table" tabindex="-1"></div>
          <div id="images"></div>
        </div>

        <!-- Right Panel: Inventory (slide-over on mobile) -->
        <div class="panel panel-right" id="inventory-panel">
          <div class="panel-header">
            <h2>Session Inventory</h2>
            <button class="panel-close" onclick="toggleInventoryPanel()">&times;</button>
          </div>
          <div id="inventory" tabindex="-1"></div>
        </div>

        <!-- Overlay for mobile -->
        <div class="panel-overlay" id="panel-overlay" onclick="toggleInventoryPanel()"></div>
      </div>

      <script type="text/javascript" src="inventory.js"></script>
    </div>

    <div id="inventory_management" class="tab_section" style="display:none;">
      <div class="toolbar">
        <div class="toolbar-group">
          <label for="destination">Destination:</label>
          <select name="Destination" id="destination">
          </select>
        </div>
      </div>

      <div class="panel panel-full">
        <div class="panel-header">
          <h2>Inventory Management</h2>
        </div>
        <div id="manager" tabindex="-1"></div>
      </div>
    </div>
  </body>
</html>
